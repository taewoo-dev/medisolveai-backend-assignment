-- ============================================================================
-- 테스트 및 데모용 기본 데이터 세트
-- 요구사항 문서를 기반으로 주요 API 동작을 바로 검증할 수 있는 수준의 데이터입니다.
-- ============================================================================

USE hospital_management;

-- 기존 데이터를 안전하게 초기화 (재실행 대비)
SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE appointments;
TRUNCATE TABLE hospital_slots;
TRUNCATE TABLE patients;
TRUNCATE TABLE treatments;
TRUNCATE TABLE doctors;
SET FOREIGN_KEY_CHECKS = 1;

-- ============================================================================
-- 1. 의사 데이터
--  - 다양한 진료과와 활성/비활성 상태 포함
-- ============================================================================
INSERT INTO doctors (name, department, is_active)
VALUES
    ('김피부', '피부과', TRUE),
    ('이레이저', '피부과', TRUE),
    ('박성형', '성형외과', TRUE),
    ('최동안', '피부과', TRUE),
    ('정테스트', '피부과', FALSE);

-- ============================================================================
-- 2. 진료 항목 데이터
--  - 30분 단위 소요시간, 다양한 가격/설명, 비활성 항목 포함
-- ============================================================================
INSERT INTO treatments (name, duration_minutes, price, description, is_active)
VALUES
    ('기본 상담', 30, 50000, '피부 상태 진단 및 상담', TRUE),
    ('레이저 토닝', 60, 150000, '피부톤 개선을 위한 레이저 시술', TRUE),
    ('여드름 집중케어', 30, 120000, '압출 및 재생 케어 프로그램', TRUE),
    ('미백 관리', 60, 130000, '톤업 및 브라이트닝 케어', TRUE),
    ('보톡스 패키지', 90, 200000, '주름 개선 보톡스 시술', TRUE),
    ('필러 프리미엄', 120, 320000, '볼륨 개선 필러 프로그램', TRUE),
    ('스페셜 케어', 60, 180000, '이벤트성 스페셜 케어', FALSE);

-- ============================================================================
-- 3. 병원 시간대(30분 단위) 기본 설정
--  - 점심시간 제외, 일부 시간대는 용량 2명으로 제한, 토요일 전용 슬롯 예시 제공
-- ============================================================================
INSERT INTO hospital_slots (start_time, end_time, max_capacity, day_of_week, is_active)
VALUES
    ('09:00:00', '09:30:00', 3, NULL, TRUE),
    ('09:30:00', '10:00:00', 3, NULL, TRUE),
    ('10:00:00', '10:30:00', 3, NULL, TRUE),
    ('10:30:00', '11:00:00', 3, NULL, TRUE),
    ('11:00:00', '11:30:00', 3, NULL, TRUE),
    ('11:30:00', '12:00:00', 3, NULL, TRUE),
    ('13:00:00', '13:30:00', 3, NULL, TRUE),
    ('13:30:00', '14:00:00', 3, NULL, TRUE),
    ('14:00:00', '14:30:00', 2, NULL, TRUE),
    ('14:30:00', '15:00:00', 2, NULL, TRUE),
    ('15:00:00', '15:30:00', 3, NULL, TRUE),
    ('15:30:00', '16:00:00', 3, NULL, TRUE),
    ('16:00:00', '16:30:00', 3, NULL, TRUE),
    ('16:30:00', '17:00:00', 3, NULL, TRUE),
    ('17:00:00', '17:30:00', 3, NULL, TRUE),
    ('17:30:00', '18:00:00', 3, NULL, TRUE),
    ('10:00:00', '10:30:00', 2, 'SATURDAY', TRUE),
    ('10:30:00', '11:00:00', 2, 'SATURDAY', TRUE);

-- ============================================================================
-- 4. 환자 데이터
--  - 전화번호는 고유 값으로 구성, 일부는 재진 구분 확인용 이력 포함
-- ============================================================================
INSERT INTO patients (name, phone)
VALUES
    ('홍길동', '010-1000-0001'),
    ('김영희', '010-1000-0002'),
    ('박철수', '010-1000-0003'),
    ('이미영', '010-1000-0004'),
    ('정수민', '010-1000-0005'),
    ('테스터1', '010-1000-0006'),
    ('테스터2', '010-1000-0007'),
    ('테스터3', '010-1000-0008');

-- ============================================================================
-- 5. 예약 데이터
--  - 과거 완료/취소 이력과 미래 예약을 혼합하여 모든 상태(PENDING, CONFIRMED, COMPLETED, CANCELLED) 포함
--  - 초진/재진 판별 검증, 병원 수용 인원, 점심/영업 시간 정책 확인 가능
-- ============================================================================
INSERT INTO appointments (
    doctor_id,
    patient_id,
    treatment_id,
    appointment_datetime,
    status,
    visit_type,
    memo
)
VALUES
    (1, 1, 1, '2024-09-20 10:00:00', 'COMPLETED', 'FIRST_VISIT', '초진 완료'),
    (1, 1, 2, '2024-10-05 11:00:00', 'COMPLETED', 'RETURN_VISIT', '레이저 재진 완료'),
    (3, 3, 3, '2024-09-10 10:00:00', 'COMPLETED', 'FIRST_VISIT', '초진 완료'),
    (2, 2, 3, '2024-10-12 13:30:00', 'COMPLETED', 'FIRST_VISIT', '여드름 집중케어 완료'),
    (3, 3, 5, '2024-10-18 15:00:00', 'CANCELLED', 'RETURN_VISIT', '환자 사정으로 취소'),
    (4, 4, 4, '2024-10-22 16:00:00', 'COMPLETED', 'FIRST_VISIT', '미백 관리 완료'),
    (4, 6, 1, '2024-09-25 11:30:00', 'COMPLETED', 'FIRST_VISIT', '기본 상담 완료'),
    (1, 4, 2, '2024-11-10 09:00:00', 'CONFIRMED', 'RETURN_VISIT', '재진 진행'),
    (1, 5, 1, '2024-11-10 09:15:00', 'PENDING', 'FIRST_VISIT', '대기 중'),
    (1, 6, 3, '2024-11-10 10:30:00', 'CONFIRMED', 'RETURN_VISIT', '재진 진행'),
    (2, 2, 2, '2024-11-10 14:00:00', 'CONFIRMED', 'RETURN_VISIT', '레이저 2회차'),
    (3, 7, 5, '2024-11-11 15:30:00', 'PENDING', 'FIRST_VISIT', '장시간 시술 대기'),
    (2, 8, 6, '2024-11-12 13:00:00', 'CONFIRMED', 'FIRST_VISIT', '장시간 진료 예약'),
    (1, 5, 3, '2024-11-13 17:00:00', 'PENDING', 'FIRST_VISIT', '추가 예약 요청'),
    (4, 6, 4, '2024-11-14 09:30:00', 'CONFIRMED', 'RETURN_VISIT', '재진 진행');

-- 완료 메시지
SELECT '테스트 데이터 삽입이 완료되었습니다.' AS message;
